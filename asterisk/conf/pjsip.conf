; =================================================================================
; ARQUIVO PJSIP.CONF - VERSÃO CANÔNICA E FINAL
; =================================================================================

; --- Define o transporte de rede UDP ---
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0

; --- Define um TEMPLATE com configurações comuns para todos os ramais ---
[endpoint-template](!)
type=endpoint
context=default
disallow=all
allow=ulaw
; Opções cruciais para garantir que o áudio e o sinal funcionem bem em redes com NAT
force_rport=yes
rewrite_contact=yes
rtp_symmetric=yes

; --- Define um TEMPLATE para a autenticação ---
[auth-template](!)
type=auth
auth_type=userpass

; --- Define um TEMPLATE para o registro (AOR - Address of Record) ---
[aor-template](!)
type=aor
max_contacts=1

; =================================================================================
; DEFINIÇÃO DO RAMAL 1000
; =================================================================================

; O Endpoint herda as configurações do template e adiciona as suas próprias
[1000](endpoint-template)
auth=auth1000 ; Aponta para a seção de autenticação abaixo
aors=1000     ; Aponta para a seção AOR abaixo (que se chama [1000])

; A Autenticação com nome único
[auth1000](auth-template)
username=1000
password=1234

; O AOR (Address of Record) - O nome da seção DEVE ser o número do ramal
[1000](aor-template)
; Nenhuma configuração extra necessária aqui, já herdou max_contacts

; =================================================================================
; DEFINIÇÃO DO NOVO RAMAL 2000
; =================================================================================

; O Endpoint para o ramal 2000, herdando as mesmas configurações
[2000](endpoint-template)
auth=auth2000 ; Aponta para a nova autenticação
aors=2000     ; Aponta para o novo AOR

; A Autenticação para o ramal 2000
[auth2000](auth-template)
username=2000
password=5678 ; Uma nova senha para este ramal

; O AOR para o ramal 2000
[2000](aor-template)
; Nenhuma configuração extra necessária aqui
